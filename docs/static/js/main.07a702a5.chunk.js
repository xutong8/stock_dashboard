(this["webpackJsonpreact-stock-dashboard"]=this["webpackJsonpreact-stock-dashboard"]||[]).push([[0],{23:function(e,t,a){e.exports=a(52)},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(20),c=a.n(s),o=a(2),l=a(3),i=a(5),d=a(4),u=a(7),h=a.n(u),p=a(9),m=a(21),f=a.n(m).a.create({baseURL:"https://finnhub.io/api/v1/"}),b=(a(46),a(8),a(10)),y=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={search_stockArray:[],loading_api:!1},e.sendSearchResult=function(){var t=Object(p.a)(h.a.mark((function t(a,r){var n,s,c,o,l,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a?document.querySelector(".stock-code__value").value.toUpperCase():r,s=Math.round((new Date).getTime()/1e3),c=s-259200,o=!1,e.state.search_stockArray.includes(n)?(alert("Already exists"),document.querySelector(".stock-code__value").value=""):o=!0,t.next=7,f.get("/quote",{params:{symbol:n,token:"bqhq9i7rh5rbubolrqd0"}});case 7:return(l=t.sent)&&e.setState({loading_api:!0}),t.next=11,f.get("/stock/candle",{params:{symbol:n,resolution:5,from:c,to:s,token:"bqhq9i7rh5rbubolrqd0"}});case 11:i=t.sent,e.setState({search_stockArray:e.state.search_stockArray.concat(n)},(function(){o&&(0==l.data.c&&0==l.data.h&&0==l.data.l&&0==l.data.o&&0==l.data.pc&&0==l.data.t?e.props.sendSearchGraphResult("no_data",""):(e.props.sendSearchGraphResult(!0,{stockValue:n,response:i.data}),e.props.sendSearchResult(l.data),e.setState({loading_api:!1})),document.querySelector(".stock-code__value").value="")}));case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.validateBtn=function(e){var t=document.querySelector(".btn-search");""===e||e.length>4?t.disabled=!0:t.disabled=!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){if(document.querySelector(".btn-search").disabled=!0,null!==localStorage.getItem("historyStockArray")){var e=JSON.parse(localStorage.getItem("historyStockArray"));if(window.confirm("You have saved stocks. Would you like to load them?"))for(var t=0;t<e.length;t++)this.sendSearchResult(!1,e[t]);else localStorage.removeItem("historyStockArray")}}},{key:"componentDidUpdate",value:function(){""===document.querySelector(".btn-search").value&&(document.querySelector(".btn-search").disabled=!0)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"card card-container search"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h2",{className:"h6 mb-0"},"searching..."),n.a.createElement("input",{type:"text",className:"form-control stock-code__value",placeholder:"Stock Code (e.g. AAPL)",onKeyUp:function(t){return e.validateBtn(t.target.value)}}),n.a.createElement("button",{className:"btn btn-secondary w-100 btn-search",onClick:function(){return e.sendSearchResult(!0,"")},disabled:this.loading_api},"Search Results",n.a.createElement(b.b,null))))}}]),a}(n.a.Component),v=(a(47),function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={validator_start_date:"",validator_end_date:""},e.start_dateValidator=function(t){var a=new Date;e.setState({validator_start_date:t},(function(){Date.parse(e.state.validator_start_date)<Date.parse(e.state.validator_end_date)&&Date.parse(e.state.validator_start_date)<a&&Date.parse(e.state.validator_end_date)<a?document.querySelector(".btn-filter").disabled=!1:document.querySelector(".btn-filter").disabled=!0}))},e.end_dateValidator=function(t){var a=new Date;e.setState({validator_end_date:t},(function(){Date.parse(e.state.validator_start_date)<Date.parse(e.state.validator_end_date)&&Date.parse(e.state.validator_end_date)<a?document.querySelector(".btn-filter").disabled=!1:document.querySelector(".btn-filter").disabled=!0}))},e.filterMyChart=Object(p.a)(h.a.mark((function t(){var a,r,n,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.querySelector(".filter-select").value,r=new Date(document.querySelector("input.start-date").value)/1e3,n=new Date(document.querySelector("input.end-date").value)/1e3,t.next=5,f.get("/stock/candle",{params:{symbol:a,resolution:5,from:r,to:n,token:"bqhq9i7rh5rbubolrqd0"}});case 5:s=t.sent,e.props.getFilteredData([r,n],{stockValue:a,response:s.data}),document.querySelector("input.start-date").value="",document.querySelector("input.end-date").value="";case 9:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.props.showFilterDOM&&(document.querySelector(".btn-filter").disabled=!0)}},{key:"render",value:function(){var e,t=this;return e=this.props.showGraphData.map((function(e,a){return n.a.createElement("option",{value:e.stockValue,key:a,selected:t.props.showGraphData[t.props.showGraphData.length-1]===e?"selected":""},e.stockValue)})),n.a.createElement("div",{className:"card card-container filter"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h2",{className:"h6 mb-2"},"filter"),this.props.showFilterDOM?n.a.createElement("div",null,n.a.createElement("select",{className:"custom-select filter-select"},e),n.a.createElement("div",{className:"d-flex filter-card-date mt-2"},n.a.createElement("div",{className:"filter-card-date-div"},n.a.createElement("label",{className:"mb-0"},"Start Date:"),n.a.createElement("input",{className:"form-control start-date",type:"date",onChange:function(e){return t.start_dateValidator(e.target.value)}})),n.a.createElement("div",{className:"filter-card-date-div"},n.a.createElement("label",{className:"mb-0"},"End Date:"),n.a.createElement("input",{className:"form-control end-date",type:"date",onChange:function(e){return t.end_dateValidator(e.target.value)}}))),n.a.createElement("button",{className:"btn btn-secondary w-100 mt-3 btn-filter",onClick:this.filterMyChart},"Filter",n.a.createElement(b.a,null))):n.a.createElement("p",{className:"mb-0 no-filter-message"},"waiting...")))}}]),a}(n.a.Component)),g=(a(48),function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={currency:"$"},e}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this;return e=this.props.tableData.map((function(e,a){if("Symbol not supported"!==e)return n.a.createElement("tr",{key:a},n.a.createElement("th",{scope:"row"},t.props.graphData[a].stockValue),n.a.createElement("td",null,JSON.stringify(new Date(1e3*e.t)).split("T")[0].replace('"',"")),n.a.createElement("td",{className:t.state.currency+e.o.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text font-weight-bold":"red-text font-weight-bold"},t.state.currency+e.o.toFixed(2)),n.a.createElement("td",{className:t.state.currency+e.l.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text font-weight-bold":"red-text font-weight-bold"},t.state.currency+e.l.toFixed(2)),n.a.createElement("td",{className:t.state.currency+e.h.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text font-weight-bold":"red-text font-weight-bold"},t.state.currency+e.h.toFixed(2)),n.a.createElement("td",{className:t.state.currency+e.c.toFixed(2)<t.state.currency+e.pc.toFixed(2)?"green-text font-weight-bold":"red-text font-weight-bold"},t.state.currency+e.pc.toFixed(2)),n.a.createElement("td",{className:t.state.currency+e.c.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text font-weight-bold":"red-text font-weight-bold"},t.state.currency+e.c.toFixed(2)),n.a.createElement("td",{className:t.state.currency+e.c.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text font-weight-bold":"red-text font-weight-bold"},(100-e.pc.toFixed(2)/e.c.toFixed(2)*100).toFixed(2)+"%"))})),n.a.createElement("div",{className:"card card-container table-data"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h2",{className:"h6 mb-3"},"Latest available data:"),this.props.showTableData?n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Stock Code"),n.a.createElement("th",{scope:"col"},"Last Updated Data"),n.a.createElement("th",{scope:"col"},"Open Price"),n.a.createElement("th",{scope:"col"},"Low Price"),n.a.createElement("th",{scope:"col"},"High Price"),n.a.createElement("th",{scope:"col"},"Previous Close Price"),n.a.createElement("th",{scope:"col"},"Current Price"),n.a.createElement("th",{scope:"col"},"% From Yesterday"))),n.a.createElement("tbody",null,e)):n.a.createElement("p",{className:"mb-0 no-data-message"},"There are currently no available data. Please search stock code for more details.")))}}]),a}(n.a.Component)),D=a(6),k=a(22),w=a.n(k),S=(a(51),function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).chartRef=n.a.createRef(),e.convertToDate=function(e){var t=new Date(e),a=("0"+(t.getMonth()+1)).slice(-2),r=("0"+t.getDate()).slice(-2);return[t.getFullYear(),a,r].join("-")},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){if(this.props.showGraphData){var e,t=this.props.graphData.y_axis[0]<this.props.graphData.y_axis[this.props.graphData.y_axis.length-1]?"#81b737":"#d54f4f",a=this.chartRef.current.getContext("2d");new w.a(a,{type:"line",data:{labels:this.props.graphData.x_axis,datasets:[{data:this.props.graphData.y_axis,backgroundColor:"rgba(0, 0, 0, 0)",borderColor:t}]},options:(e={responsive:!0,tooltips:{enabled:!0}},Object(D.a)(e,"tooltips",{mode:"point"}),Object(D.a)(e,"scales",{xAxes:[Object(D.a)({ticks:{display:!1},gridLines:{display:!0}},"gridLines",{color:"rgba(0, 0, 0, 0)"})],yAxes:[Object(D.a)({ticks:{display:!0,stepSize:5},gridLines:{display:!1}},"gridLines",{color:"rgba(0, 0, 0, 0)"})]}),Object(D.a)(e,"legend",{display:!1}),Object(D.a)(e,"elements",{point:{radius:0}}),e)})}}},{key:"render",value:function(){return n.a.createElement("div",{className:"main__chart",id:"myChart-"+this.props.graphData.stockValue},n.a.createElement("div",null,n.a.createElement("h2",{className:"h5 mb-3 stockValue"},this.props.graphData.stockValue,this.props.graphData.date_data?n.a.createElement("div",{className:"ml-2 d-inline"},n.a.createElement("span",null,"(",this.convertToDate(this.props.graphData.date_data.filteredStartDate),"\xa0to\xa0",this.convertToDate(this.props.graphData.date_data.filteredEndDate),")")):n.a.createElement("div",{className:"ml-2 d-inline"},"(Last three days)")),n.a.createElement("canvas",{className:"myChart",ref:this.chartRef})))}}]),a}(n.a.Component)),E=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={tableData:[],graphData:[],activeStockValue:"",showFilterDOM:!1,showFilterData:!1,showTableData:!1,showGraphData:!1,lsArray:[],option:[]},e.sendSearchResult=function(t){"Symbol not supported"!==t&&e.setState({tableData:e.state.tableData.concat(t),showFilterDOM:!0,showTableData:!0})},e.getFilteredData=function(t,a){for(var r=e.state.graphData,n=[],s=0;s<r.length;s++){var c=r[s];if(-1!==a.stockValue.indexOf(c.stockValue)){n=[];for(var o=0;o<a.response.t.length;o++)n.push(new Date(1e3*a.response.t[o]));r.splice(s,1),r.push({stockValue:a.stockValue,x_axis:n,y_axis:a.response.c,date_data:{filteredStartDate:new Date(1e3*t[0]),filteredEndDate:new Date(1e3*t[1])}}),e.setState({graphData:r,activeStockValue:a.stockValue,showGraphData:!0},(function(){e.setState({showGraphData:!0})}))}}},e.sendSearchGraphResult=function(t,a){if("no_data"!=t){var r=[];if(e.setState({lsArray:e.state.lsArray.concat(a.stockValue)},(function(){localStorage.setItem("historyStockArray",JSON.stringify(e.state.lsArray))})),"no_data"!==a.response.s){for(var n=0;n<a.response.t.length;n++)r.push(new Date(1e3*a.response.t[n]));e.setState({graphData:e.state.graphData.concat({stockValue:a.stockValue,x_axis:r,y_axis:a.response.c}),activeStockValue:a.stockValue,showGraphData:!0},(function(){e.setState({showGraphData:!0})}))}else e.setState({graphData:e.state.graphData.concat({stockValue:a.stockValue,response:"no_data",showGraphData:!0})},(function(){e.setState({showGraphData:!0})}))}else alert("Stock Code does not exist within the Database."),window.location.reload(!0)},e.checkStockCode=function(t){e.state.graphData.map((function(a,r){document.querySelector("#myChart-"+a.stockValue).style.display="none",r===e.state.graphData.length-1&&(document.querySelector("#myChart-"+t).style.display="block")}))},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.state.graphData.map((function(t,a){document.querySelector("#myChart-"+t.stockValue).style.display="none",a===e.state.graphData.length-1&&(document.querySelector("#myChart-"+t.stockValue).style.display="block")}))}},{key:"render",value:function(){var e,t=this,a="";return this.state.showGraphData&&(a=this.state.graphData.map((function(e,a){return"no_data"!==e.response?n.a.createElement(S,{key:a,tableData:t.state.tableData,showGraphData:t.state.showGraphData,showActiveStockCode:t.state.activeStockValue,graphData:e,filteredData:t.state.filteredData,showFilterData:t.state.showFilterData}):n.a.createElement("p",{key:a,className:"no-graph-data-message"},"wait for data")}))),e=this.state.graphData.map((function(e,a){return n.a.createElement("option",{value:e.stockValue,key:a,selected:t.state.graphData[t.state.graphData.length-1]===e?"selected":""},e.stockValue)})),n.a.createElement("div",{className:this.state.showGraphData?"container-fluid app-container":"container-fluid app-container height-100"},n.a.createElement("div",{className:"row app-container__row"},n.a.createElement("div",{className:"col-12 app-container__container"},n.a.createElement("div",{className:"app-container__left"},n.a.createElement(y,{sendSearchResult:this.sendSearchResult,sendSearchGraphResult:this.sendSearchGraphResult}),n.a.createElement(v,{showFilterDOM:this.state.showFilterDOM,showGraphData:this.state.graphData,showActiveStockCode:this.state.activeStockValue,getFilteredData:this.getFilteredData})),n.a.createElement("div",{className:"app-container__right"},n.a.createElement("div",{className:"card card-container graph"},n.a.createElement("div",{className:"card-body"},this.state.showGraphData?n.a.createElement("div",null,n.a.createElement("select",{className:"custom-select main__chart-select",onChange:function(e){return t.checkStockCode(e.target.value)}},e),a):n.a.createElement("p",{className:"no-graph-data-message"},"No current stock found. Please go to the first box and search for a stock.")))))),n.a.createElement("div",{className:"row table-data-row"},n.a.createElement("div",{className:"col-12 table-data-col"},n.a.createElement(g,{showTableData:this.state.showTableData,tableData:this.state.tableData,graphData:this.state.graphData}))))}}]),a}(n.a.Component);c.a.render(n.a.createElement(E,null),document.querySelector("#root"))},8:function(e,t,a){}},[[23,1,2]]]);
//# sourceMappingURL=main.07a702a5.chunk.js.map